[{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\app\\test-heatmap\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\components\\Charts.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3166,3169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3166,3169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3186,3189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3186,3189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3205,3208],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3205,3208],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React from 'react';\r\nimport { ResponsiveContainer, AreaChart, Area, YAxis } from 'recharts';\r\nimport { DICTIONARY } from '@/data/dictionary';\r\n\r\n// --- RISK BAR COMPONENT (LINEAR GRADIENT) ---\r\ninterface GaugeProps {\r\n    score: number;\r\n    lang?: string;\r\n}\r\n// --- REFINED RISK GAUGE: OVERLAY STYLE ---\r\nexport const RiskGauge = ({ score, lang = 'EN' }: GaugeProps) => {\r\n    // Clamp score\r\n    const pct = Math.min(100, Math.max(0, score));\r\n    const isRTL = lang === 'AR';\r\n\r\n    return (\r\n        <div className=\"w-full relative mt-2 mb-2 gms-container\">\r\n            {/* Gradient Bar Wrapper (Height Fixed) */}\r\n            <div className=\"relative w-full h-[1.625rem]\">\r\n                {/* 1. The Gradient Background (Overflow Hidden for Rounded Corners) */}\r\n                <div className=\"absolute inset-0 w-full h-full !rounded-xl !border border-slate-300 dark:border-[#1E293B] overflow-hidden\">\r\n                    <div\r\n                        className={`absolute inset-0 w-full h-full ${isRTL ? 'bg-gradient-to-r from-blue-500 via-slate-400 to-rose-500' : 'bg-gradient-to-r from-rose-500 via-slate-400 to-blue-500'}`}\r\n                    />\r\n                </div>\r\n\r\n                {/* 2. The Marker (Outside overflow-hidden, so it acts as an overlay) */}\r\n                <div\r\n                    className=\"absolute top-1/2 flex flex-col items-center z-50 transition-all duration-700 ease-out pointer-events-none\"\r\n                    style={{\r\n                        left: isRTL ? 'auto' : `${pct}%`,\r\n                        right: isRTL ? `${pct}%` : 'auto',\r\n                        transform: 'translateY(-50%) translateX(calc(50% * var(--dir)))',\r\n                        ['--dir' as string]: isRTL ? 1 : -1\r\n                    }}\r\n                >\r\n                    <div className=\"bg-[#1e293b] border border-[#1e293b] px-1.5 py-0.5 rounded shadow-xl mb-1 transition-colors duration-300\">\r\n                        <span className=\"text-[0.75rem] font-black leading-none tabular-nums tracking-tighter text-white\">\r\n                            {Math.round(score)}\r\n                        </span>\r\n                    </div>\r\n                    {/* Arrow */}\r\n                    <div className=\"w-0 h-0 border-l-[4px] border-l-transparent border-r-[4px] border-r-transparent border-t-[6px] border-t-[#1e293b] drop-shadow-sm transition-colors duration-300\"></div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Labels */}\r\n            <div className={`flex justify-between px-1 mt-1 relative z-0`}>\r\n                <span className=\"text-fluid-xs font-bold text-[#ef4444] uppercase tracking-widest drop-shadow-sm\">Defensive</span>\r\n                <span className=\"text-fluid-xs font-bold text-slate-400 uppercase tracking-widest drop-shadow-sm\">Neutral</span>\r\n                <span className=\"text-fluid-xs font-bold text-[#3b82f6] uppercase tracking-widest drop-shadow-sm\">Accumulate</span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nimport dynamic from 'next/dynamic';\r\nconst Plot = dynamic(() => import('react-plotly.js'), { ssr: false }) as React.ComponentType<{\r\n    data: any[];\r\n    layout: any;\r\n    config?: any;\r\n    style?: React.CSSProperties;\r\n}>;\r\n\r\n// --- HISTORY CHART (PLOTLY IMPLEMENTATION) ---\r\ninterface HistoryEntry {\r\n    date: string;\r\n    score: number;\r\n}\r\nexport const HistoryChart = ({ data, lang = 'EN', color = '#0ea5e9' }: { data: HistoryEntry[], lang?: string, color?: string }) => {\r\n    // @ts-expect-error: DICTIONARY indexing might be slightly off for some LangType values\r\n    const t = DICTIONARY[lang] || DICTIONARY['EN'];\r\n\r\n    if (!data || data.length === 0) return (\r\n        <div className=\"h-full w-full flex items-center justify-center text-[10px] text-slate-600 font-mono uppercase tracking-widest\">\r\n            {t.chart.sync}\r\n        </div>\r\n    );\r\n\r\n    // Localize and format dates\r\n    const normalizedLang = lang?.toUpperCase();\r\n    const isJP = normalizedLang === 'JP';\r\n\r\n    const chartDataValues = [...(data || [])].map(d => {\r\n        try {\r\n            const date = new Date(d.date);\r\n            // If the date is invalid (already formatted), return as is\r\n            if (isNaN(date.getTime())) return d;\r\n\r\n            const formatter = new Intl.DateTimeFormat('en-US', {\r\n                month: '2-digit', day: '2-digit',\r\n                hour: '2-digit', minute: '2-digit',\r\n                hour12: false,\r\n                timeZone: isJP ? 'Asia/Tokyo' : 'UTC'\r\n            });\r\n            const parts = formatter.formatToParts(date);\r\n            const m = parts.find(p => p.type === 'month')?.value;\r\n            const day = parts.find(p => p.type === 'day')?.value;\r\n            const h = parts.find(p => p.type === 'hour')?.value;\r\n            const min = parts.find(p => p.type === 'minute')?.value;\r\n            return {\r\n                ...d,\r\n                date: `${m}/${day} ${h}:${min}`\r\n            };\r\n        } catch {\r\n            return d;\r\n        }\r\n    });\r\n\r\n    return (\r\n        <div className=\"h-full w-full flex flex-col pt-2\">\r\n            <div className=\"flex-1 min-h-0\">\r\n                <Plot\r\n                    data={[\r\n                        {\r\n                            x: chartDataValues.map(d => d.date),\r\n                            y: chartDataValues.map(d => d.score),\r\n                            type: 'scatter',\r\n                            mode: 'lines', // Removed markers for smoother look\r\n                            line: { color: color, width: 3, shape: 'spline', smoothing: 1.3 },\r\n                            fill: 'tozeroy',\r\n                            fillcolor: `${color}26`, // 15% Opacity\r\n                            name: 'GMS',\r\n                            hovertemplate: '<b>%{y} GMS</b><br>%{x}<extra></extra>'\r\n                        }\r\n                    ]}\r\n                    layout={{\r\n                        autosize: true,\r\n                        margin: { l: 20, r: 5, t: 5, b: 20 },\r\n                        paper_bgcolor: 'rgba(0,0,0,0)',\r\n                        plot_bgcolor: 'rgba(0,0,0,0)',\r\n                        showlegend: false,\r\n                        xaxis: {\r\n                            showgrid: false,\r\n                            zeroline: false,\r\n                            showline: false,\r\n                            tickfont: { color: normalizedLang === 'JP' ? '#475569' : '#64748b', size: 9 }, // Slate-500\r\n                            type: 'category'\r\n                        },\r\n                        yaxis: {\r\n                            range: [0, 100],\r\n                            showgrid: true,\r\n                            gridcolor: 'rgba(0,0,0,0.05)', // Default Light Grid\r\n                            zeroline: false,\r\n                            showline: false,\r\n                            tickfont: { color: normalizedLang === 'JP' ? '#475569' : '#64748b', size: 9 }\r\n                        },\r\n                        font: { family: 'var(--font-inter), sans-serif' }\r\n                    }}\r\n                    config={{ displayModeBar: false, responsive: true }}\r\n                    style={{ width: '100%', height: '100%' }}\r\n                />\r\n            </div>\r\n            <div className=\"text-center text-[9px] text-slate-700 font-mono mt-1 opacity-60 tracking-[0.3em] uppercase\">\r\n                {t.chart.trend}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- DETAILED METRIC CHART (30-DAY PLOTLY) WITH HIGH-CONTRAST AXES ---\r\ninterface MetricChartProps {\r\n    data: number[];\r\n    color: string;\r\n    currentPrice?: string;\r\n    startDate?: string;\r\n    endDate?: string;\r\n    yRange?: [number, number];\r\n}\r\n\r\nexport const MetricChart = ({ data, color }: MetricChartProps) => {\r\n    if (!data || data.length === 0) return null;\r\n\r\n    // Convert array to object array for Recharts\r\n    const chartData = data.map((val, i) => ({ i, val }));\r\n\r\n    return (\r\n        <div className=\"h-full w-full relative flex flex-col\">\r\n            <div className=\"flex-grow\">\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <AreaChart data={chartData}>\r\n                        <defs>\r\n                            <linearGradient id={`grad-${color}`} x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                <stop offset=\"5%\" stopColor={color} stopOpacity={0.3} />\r\n                                <stop offset=\"95%\" stopColor={color} stopOpacity={0} />\r\n                            </linearGradient>\r\n                        </defs>\r\n                        <YAxis domain={['auto', 'auto']} hide />\r\n                        <Area\r\n                            type=\"monotone\"\r\n                            dataKey=\"val\"\r\n                            stroke={color}\r\n                            fill={`url(#grad-${color})`}\r\n                            strokeWidth={2}\r\n                            isAnimationActive={false}\r\n                        />\r\n                    </AreaChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\components\\LanguageSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\components\\PulseTile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\components\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\components\\TVPartnerCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\components\\TerminalSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\components\\ThemeProvider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_e' is defined but never used.","line":52,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\n\r\ntype Theme = 'dark' | 'light';\r\n\r\ninterface ThemeContextType {\r\n    theme: Theme;\r\n    toggleTheme: () => void;\r\n    setTheme: (theme: Theme) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport const ThemeProvider = ({ children }: { children: React.ReactNode }) => {\r\n    const [theme, setThemeState] = useState<Theme>('dark');\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    React.useLayoutEffect(() => {\r\n        setMounted(true);\r\n        // FORCE DEFAULT DARK: Only load from storage if present.\r\n        // We explicitly DO NOT check window.matchMedia('(prefers-color-scheme: dark)')\r\n        // so that the default is always dark regardless of OS settings.\r\n        try {\r\n            const savedConfig = localStorage.getItem('gms_terminal_config_v1');\r\n            if (savedConfig) {\r\n                const config = JSON.parse(savedConfig);\r\n                if (config.theme) {\r\n                    setThemeState(config.theme);\r\n                }\r\n            }\r\n        } catch (_e) {\r\n            console.warn('Failed to load theme preference', _e);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!mounted) return;\r\n        const root = window.document.documentElement;\r\n        root.classList.remove('light', 'dark');\r\n        root.classList.add(theme);\r\n\r\n        // Sync with legacy config storage for MultiAssetSummary compatibility\r\n        // This ensures if user refreshes, MultiAssetSummary reads the correct theme from local storage\r\n        try {\r\n            const saved = localStorage.getItem('gms_terminal_config_v1');\r\n            const config = saved ? JSON.parse(saved) : {};\r\n            if (config.theme !== theme) {\r\n                config.theme = theme;\r\n                localStorage.setItem('gms_terminal_config_v1', JSON.stringify(config));\r\n            }\r\n        } catch (_e) {\r\n            // Ignore storage errors\r\n        }\r\n\r\n    }, [theme, mounted]);\r\n\r\n    const toggleTheme = () => {\r\n        setThemeState(prev => prev === 'dark' ? 'light' : 'dark');\r\n    };\r\n\r\n    const setTheme = (newTheme: Theme) => {\r\n        setThemeState(newTheme);\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ theme, toggleTheme, setTheme }}>\r\n            {children}\r\n            {!mounted && <div className=\"invisible\" />}\r\n        </ThemeContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useTheme = () => {\r\n    const context = useContext(ThemeContext);\r\n    if (context === undefined) {\r\n        throw new Error('useTheme must be used within a ThemeProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\shingo_kosaka.ARGOGRAPHICS\\Desktop\\GlobalMacroSignal\\frontend\\components\\ToastNotification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
